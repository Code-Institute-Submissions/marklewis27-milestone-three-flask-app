{% extends "layout.html" %}
{% block title %}
update page
{% endblock %}
{% block content %}
<div class="container">
    <H3 class="center">Edit a car in the database</H3>
    <form action="{{ url_for('changes', car_id=car._id) }}" method="POST">

        <!-- Using an If statment to get the data from the data base and check it against what information is filled 
            in about that car to display the current details for editing. This also allows the othger options to be
            displayed and selected for change. This form of updating the details is used for all of the dropdown
            options on this form --->
        <div class="row">
            <label>Select vechile type</label>
                <select class="browser-default" id="category" name="category_name">
                    <option value="" disabled selected>Please select one</option>
                    {% for cat in categories %}
                        {% if cat.category_name == car.category_name%}
                        <option value="{{cat.category_name}}" selected >{{cat.category_name}}</option>
                        {% else %}
                        <option value="{{cat.category_name}}">{{cat.category_name}}</option>
                        {% endif %}
                    {% endfor %}
                </select><br>
        </div>

        <!-- For options that have been filled in by a text box and not from a dropdown form this is the format 
            used to display the current data that is in the database for that car. This is used for all the fields
            that are like this but with the relevent data being returned to them. -->
        <div class="row">
            <label for="">Car make</label>
            <input type="text" id="car_make" name="car_make" value="{{car.car_make}}"><br>
        </div>

        <div class="row">
            <label for="">Car model</label>
            <input type="text" id="car_model" name="car_model" value="{{car.car_model}}"><br>
        </div>

        <div class="row">
            <label>Fuel type test</label>
                <select class="browser-default" name="fuel_type" id="fuel_type">
                    <option value="" disabled selected>Please select one</option>
                    {% for fuel in fuels %}
                        {% if fuel.fuel_type == car.fuel_type %}
                        <option value="{{fuel.fuel_type}}" selected >{{fuel.fuel_type}}</option>
                        {% else %}
                        <option value="{{fuel.fuel_type}}">{{fuel.fuel_type}}</option>
                        {% endif %}
                    {% endfor %}                  
                </select><br>
        </div>

        <div class="row">    
            <label for="">Engine size</label>
                <select class="browser-default" name="engine_size" id="engine_size">
                    <option value="" disabled selected>Please select one</option>
                    {% for engine in engines %}
                        {% if engine.engine_size == car.engine_size %}
                        <option value="{{engine.engine_size}}" selected>{{engine.engine_size}}</option>
                        {% else %}
                        <option value="{{engine.engine_size}}">{{engine.engine_size}}</option>
                        {% endif %}
                    {% endfor %}
                </select><br>
        </div>        

        <div class="row">
            <label for="">Gearbox type</label>
                <select class="browser-default" name="gearbox_type" id="gearbox_type">
                    <option value="" disabled selected>Please select one</option>
                    {% for gearbox in gearboxes %}
                        {% if gearbox.gearbox_type == car.gearbox_type %}
                        <option value="{{gearbox.gearbox_type}}" selected>{{gearbox.gearbox_type}}</option>
                        {% else %}
                        <option value="{{gearbox.gearbox_type}}">{{gearbox.gearbox_type}}</option>
                        {% endif %}
                    {% endfor %}
                </select><br>
        </div>        

        <div class="row">
            <label for="">Car Mileage</label>
            <input type="text" id="car_mileage" name="car_mileage" value="{{car.car_mileage}}"><br>
        </div>

        <div class="row">
            <label for="">Car colour</label>
            <input type="text" id="car_colour" name="car_colour" value="{{car.car_colour}}"><br>
        </div>

        <!-- The button to submit the changes liked in from materilize  -->
        <div class="row center">
            <input class="waves-effect waves-light btn center" type="submit" value="Submit changes to the database">
        </div>
    </form>
</div>
{% endblock %}